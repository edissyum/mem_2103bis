!function(){function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return e};var e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(G){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),s=new x(n||[]);return o(i,"_invoke",{value:C(t,r,s)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(G){return{type:"throw",arg:G}}}e.wrap=u;var b={};function m(){}function d(){}function f(){}var g={};l(g,i,function(){return this});var h=Object.getPrototypeOf,v=h&&h(h(O([])));v&&v!==r&&n.call(v,i)&&(g=v);var y=f.prototype=m.prototype=Object.create(g);function S(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function k(t,e){function r(o,a,i,s){var c=p(t[o],t,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==typeof u&&n.call(u,"__await")?e.resolve(u.__await).then(function(t){r("next",t,i,s)},function(t){r("throw",t,i,s)}):e.resolve(u).then(function(t){l.value=t,i(l)},function(t){return r("throw",t,i,s)})}s(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return a=a?a.then(o,o):o()}})}function C(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return w()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=E(i,r);if(s){if(s===b)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,b;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,b):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b)}function F(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(F,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:w}}function w(){return{value:void 0,done:!0}}return d.prototype=f,o(y,"constructor",{value:f,configurable:!0}),o(f,"constructor",{value:d,configurable:!0}),d.displayName=l(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,l(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},e.awrap=function(t){return{__await:t}},S(k.prototype),l(k.prototype,s,function(){return this}),e.AsyncIterator=k,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new k(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},S(y),l(y,c,"Generator"),l(y,i,function(){return this}),l(y,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=O,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),b}},e}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,a=void 0,"symbol"==typeof(a=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),n)}var o,a}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"6S62":function(r,o,a){"use strict";a.r(o),a.d(o,"InstallerModule",function(){return te});var i,s=a("vWc3"),c=a("cMWS"),l=a("tyNb"),u=a("B/XX"),p=a("1YbM"),b=a("mrSG"),m=a("0IaG"),d=a("LRne"),f=a("vkgz"),g=a("JIr8"),h=a("fXoL"),v=a("sYmb"),y=a("tk/3"),S=((i=function(){function t(){e(this,t),this.steps=[]}return n(t,[{key:"setStep",value:function(t){this.steps.push(t)}},{key:"isStepAlreadyLaunched",value:function(t){return this.steps.filter(function(e){return t===e.idStep}).length>0}}]),t}()).\u0275fac=function(t){return new(t||i)},i.\u0275prov=h.Ob({token:i,factory:i.\u0275fac}),i),k=a("AXEc"),C=a("uqn4"),E=a("7EHt"),F=a("bTqV"),I=a("ofXK"),x=a("MutI"),O=a("FKr1");function w(t,e){1&t&&(h.Wb(0),h.Sc(1,"..."),h.Vb())}function G(t,e){1&t&&h.Tb(0,"i",16)}function X(t,e){1&t&&h.Tb(0,"i",17)}function Y(t,e){if(1&t&&(h.Yb(0,"div",18),h.Sc(1),h.Xb()),2&t){var r=h.jc().$implicit;h.Eb(1),h.Uc(" ",r.msgErr," ")}}function T(t,e){if(1&t&&(h.Yb(0,"mat-list-item"),h.Yb(1,"div",11),h.Yb(2,"span",12),h.Sc(3),h.Xb(),h.Qc(4,w,2,0,"ng-container",10),h.Sc(5,"\xa0 "),h.Qc(6,G,1,0,"i",13),h.Qc(7,X,1,0,"i",14),h.Qc(8,Y,2,1,"div",15),h.Xb(),h.Xb()),2&t){var r=e.$implicit;h.Eb(1),h.Kb("endStep","OK"===r.state||"KO"===r.state)("currentStep","inProgress"===r.state),h.Eb(2),h.Tc(r.label),h.Eb(1),h.rc("ngIf","inProgress"===r.state),h.Eb(2),h.rc("ngIf","OK"===r.state),h.Eb(1),h.rc("ngIf","KO"===r.state),h.Eb(1),h.rc("ngIf",""!==r.msgErr)}}function _(t,e){if(1&t){var r=h.Zb();h.Yb(0,"button",23),h.fc("click",function(){return h.Hc(r),h.jc(2).goToInstance()}),h.Sc(1),h.kc(2,"translate"),h.Xb()}2&t&&(h.Eb(1),h.Tc(h.lc(2,1,"lang.goToNewInstance")))}function L(t,e){1&t&&(h.Yb(0,"button",24),h.Sc(1),h.kc(2,"translate"),h.Xb()),2&t&&(h.Eb(1),h.Tc(h.lc(2,1,"lang.cancel")))}function P(t,e){if(1&t&&(h.Wb(0),h.Tb(1,"span",19),h.Yb(2,"div",20),h.Qc(3,_,3,3,"button",21),h.Qc(4,L,3,3,"button",22),h.Xb(),h.Vb()),2&t){var r=h.jc();h.Eb(3),h.rc("ngIf",!r.isInstallError()&&r.isInstallComplete()),h.Eb(1),h.rc("ngIf",r.isInstallError()||!r.isInstallBegin())}}var j,M=((j=function(){function r(t,n,o,a,i,s,c){e(this,r),this.translate=t,this.data=n,this.dialogRef=o,this.http=a,this.installerService=i,this.notify=s,this.authService=c,this.steps=[],this.customId="",this.disableAnimation=!0}return n(r,[{key:"ngOnInit",value:function(){return Object(b.a)(this,void 0,void 0,t().mark(function e(){return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.initSteps();case 1:case"end":return t.stop()}},e,this)}))}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){return t.disableAnimation=!1})}},{key:"launchInstall",value:function(){return Object(b.a)(this,void 0,void 0,t().mark(function e(){var r,n;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(t.t0=n<this.data.length,!t.t0){t.next=8;break}return this.steps[n].state="inProgress",t.next=6,this.doStep(n);case 6:r=t.sent,t.t0=r;case 8:if(!t.t0){t.next=13;break}case 10:n++,t.next=1;break;case 13:case"end":return t.stop()}},e,this)}))}},{key:"initSteps",value:function(){var t=this;this.data.forEach(function(e,r){0===r?t.customId=e.body.customId:e.body.customId=t.customId,t.steps.push({idStep:e.idStep,label:e.description,state:"",msgErr:""})})}},{key:"doStep",value:function(t){var e=this;return new Promise(function(r,n){e.installerService.isStepAlreadyLaunched(e.data[t].idStep)?(e.steps[t].state="OK",r(!0)):e.http[e.data[t].route.method.toLowerCase()](e.data[t].route.url,e.data[t].body).pipe(Object(f.a)(function(n){e.steps[t].state="OK",e.installerService.setStep(e.steps[t]),r(!0)}),Object(g.a)(function(n){return e.steps[t].state="KO",e.steps[t].msgErr=void 0!==n.error.lang?e.translate.instant("lang."+n.error.lang):n.error.errors,r(!1),Object(d.a)(!1)})).subscribe()})}},{key:"isInstallBegin",value:function(){return this.steps.filter(function(t){return""===t.state}).length!==this.steps.length}},{key:"isInstallComplete",value:function(){return 0===this.steps.filter(function(t){return""===t.state}).length}},{key:"isInstallError",value:function(){return this.steps.filter(function(t){return"KO"===t.state}).length>0}},{key:"goToInstance",value:function(){var t=this;this.http.request("DELETE","../rest/installer/lock",{body:{customId:this.customId}}).pipe(Object(f.a)(function(e){t.authService.noInstall=!1,window.location.href=e.url,t.dialogRef.close("ok")}),Object(g.a)(function(e){return t.notify.handleSoftErrors(e),Object(d.a)(!1)})).subscribe()}}]),r}()).\u0275fac=function(t){return new(t||j)(h.Sb(v.d),h.Sb(m.a),h.Sb(m.g),h.Sb(y.b),h.Sb(S),h.Sb(k.a),h.Sb(C.a))},j.\u0275cmp=h.Mb({type:j,selectors:[["app-install-action"]],decls:16,vars:10,consts:[[1,"mat-dialog-content-container"],["mat-dialog-content",""],["hideToggle","","expanded",""],[1,"launch-action"],["color","primary",1,"text-center"],["mat-raised-button","","type","button","color","primary",2,"font-size","25px","padding","20px",3,"click"],[1,"far","fa-hdd"],[3,"expanded"],["installStepAction",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-line","",1,"step"],[1,"stepLabel"],["class","fa fa-check","style","color: green",4,"ngIf"],["class","fa fa-times","style","color: red",4,"ngIf"],["class","alert-message alert-message-danger","role","alert","style","margin-top: 30px;min-width: 100%;",4,"ngIf"],[1,"fa","fa-check",2,"color","green"],[1,"fa","fa-times",2,"color","red"],["role","alert",1,"alert-message","alert-message-danger",2,"margin-top","30px","min-width","100%"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","mat-button","",3,"mat-dialog-close",4,"ngIf"],["mat-raised-button","","mat-button","","color","primary",3,"click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"]],template:function(t,e){if(1&t){var r=h.Zb();h.Yb(0,"div",0),h.Yb(1,"div",1),h.Yb(2,"mat-accordion"),h.Yb(3,"mat-expansion-panel",2),h.Yb(4,"div",3),h.Yb(5,"h2",4),h.Sc(6),h.kc(7,"translate"),h.Xb(),h.Yb(8,"button",5),h.fc("click",function(){return h.Hc(r),h.Dc(13).open(),e.launchInstall()}),h.Tb(9,"i",6),h.Sc(10),h.kc(11,"translate"),h.Xb(),h.Xb(),h.Xb(),h.Yb(12,"mat-expansion-panel",7,8),h.Qc(14,T,9,9,"mat-list-item",9),h.Xb(),h.Xb(),h.Xb(),h.Qc(15,P,5,2,"ng-container",10),h.Xb()}2&t&&(h.Eb(1),h.rc("@.disabled",e.disableAnimation),h.Eb(5),h.Tc(h.lc(7,6,"lang.almostThere")),h.Eb(4),h.Uc(" ",h.lc(11,8,"lang.launchInstall")," "),h.Eb(2),h.rc("expanded",!1),h.Eb(2),h.rc("ngForOf",e.steps),h.Eb(1),h.rc("ngIf",e.isInstallComplete()||e.isInstallError()||!e.isInstallBegin()))},directives:[m.e,E.a,E.c,F.b,I.m,I.n,x.c,O.k,m.c,m.d],pipes:[v.c],styles:[".step[_ngcontent-%COMP%]{opacity:.5}.currentStep[_ngcontent-%COMP%], .step[_ngcontent-%COMP%], .step[_ngcontent-%COMP%]   .stepLabel[_ngcontent-%COMP%]{transition:all .2s}.currentStep[_ngcontent-%COMP%]{opacity:1}.currentStep[_ngcontent-%COMP%]   .stepLabel[_ngcontent-%COMP%]{font-size:150%;transition:all .2s}.endStep[_ngcontent-%COMP%]{opacity:1}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.launch-action[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),j),q=a("pLZG"),A=a("4zkx"),N=a("A6w4"),V=a("rH+9"),U=a("eiH7"),z=a("XhcP"),D=a("xHqg"),B=a("3Pt+"),Q=a("MJ5r"),H=a("NFeN"),R=a("kmnG"),K=a("d3UM"),W=a("f0Cb");function Z(t,e){if(1&t&&(h.Yb(0,"mat-option",14),h.Sc(1),h.kc(2,"translate"),h.Xb()),2&t){var r=e.$implicit;h.rc("value",r),h.Eb(1),h.Uc(" ",h.lc(2,2,"lang."+r+"Full")," ")}}function J(t,e){if(1&t&&(h.Yb(0,"mat-list-item"),h.Tb(1,"mat-icon",15),h.Yb(2,"div",16),h.Sc(3),h.Yb(4,"small",17),h.Sc(5),h.Xb(),h.Xb(),h.Xb()),2&t){var r=e.$implicit;h.Eb(3),h.Uc("",r.label," "),h.Eb(2),h.Tc(r.id)}}function tt(t,e){if(1&t&&(h.Wb(0),h.Yb(1,"mat-list"),h.Yb(2,"div",9),h.Sc(3),h.kc(4,"translate"),h.Xb(),h.Qc(5,J,6,2,"mat-list-item",10),h.Xb(),h.Tb(6,"mat-divider"),h.Vb()),2&t){var r=h.jc();h.Eb(3),h.Uc("",h.lc(4,2,"lang.instancesList")," : "),h.Eb(2),h.rc("ngForOf",r.customs)}}function et(t,e){if(1&t&&(h.Yb(0,"mat-list-item"),h.Tb(1,"mat-icon",18),h.Yb(2,"div",16),h.Sc(3),h.kc(4,"translate"),h.Xb(),h.Xb()),2&t){var r=e.$implicit;h.Eb(1),h.Gb(r.icon),h.Eb(2),h.Tc(h.lc(4,3,r.desc))}}var rt,nt=function(t){return{value1:t}},ot=((rt=function(){function t(r,n,o,a,i){e(this,t),this.translate=r,this.http=n,this.notify=o,this._formBuilder=a,this.authService=i,this.langs=[],this.appVersion=Q.a.VERSION.split(".")[0]+"."+Q.a.VERSION.split(".")[1],this.steps=[{icon:"fas fa-check-square",desc:"lang.prerequisiteCheck"},{icon:"fa fa-database",desc:"lang.databaseCreation"},{icon:"fa fa-database",desc:"lang.dataSampleCreation"},{icon:"fa fa-hdd",desc:"lang.docserverCreation"},{icon:"fas fa-tools",desc:"lang.stepCustomizationActionDesc"},{icon:"fa fa-user",desc:"lang.adminUserCreation"}],this.customs=[]}return n(t,[{key:"ngOnInit",value:function(){this.stepFormGroup=this._formBuilder.group({lang:["fr",B.y.required]}),this.getLang(),this.authService.noInstall||this.getCustoms()}},{key:"getLang",value:function(){var t=this;this.http.get("../rest/languages").pipe(Object(f.a)(function(e){t.langs=Object.keys(e.langs).filter(function(t){return"nl"!==t})}),Object(g.a)(function(e){return t.notify.handleSoftErrors(e),Object(d.a)(!1)})).subscribe()}},{key:"changeLang",value:function(t){this.translate.use(t)}},{key:"getCustoms",value:function(){var t=this;this.http.get("../rest/installer/customs").pipe(Object(f.a)(function(e){t.customs=e.customs}),Object(g.a)(function(e){return t.notify.handleSoftErrors(e),Object(d.a)(!1)})).subscribe()}},{key:"initStep",value:function(){return!1}},{key:"getInfoToInstall",value:function(){return[]}}]),t}()).\u0275fac=function(t){return new(t||rt)(h.Sb(v.d),h.Sb(y.b),h.Sb(k.a),h.Sb(B.e),h.Sb(C.a))},rt.\u0275cmp=h.Mb({type:rt,selectors:[["app-welcome"]],decls:32,vars:25,consts:[[1,"stepContent"],[1,"stepContentTitle"],[2,"text-align","center"],["svgIcon","maarchLogoFull",1,"maarchLogoFull"],[2,"width","850px","margin","auto",3,"formGroup"],["appearance","outline","floatLabel","never"],["formControlName","lang","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-subheader",""],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","href","https://community.maarch.org/","target","_blank"],["mat-raised-button","","color","primary","href","http://www.maarch.com","target","_blank"],[2,"font-style","italic","padding-top","30px","text-align","right",3,"innerHTML"],[3,"value"],["mat-list-icon","","color","primary",1,"fas","fa-box-open"],["mat-line",""],[2,"color","#666"],["mat-list-icon","","color","primary"]],template:function(t,e){1&t&&(h.Yb(0,"div",0),h.Yb(1,"h2",1),h.Sc(2),h.kc(3,"translate"),h.Xb(),h.Yb(4,"div",2),h.Tb(5,"mat-icon",3),h.Xb(),h.Yb(6,"form",4),h.Yb(7,"mat-form-field",5),h.Yb(8,"mat-label"),h.Sc(9),h.kc(10,"translate"),h.Xb(),h.Yb(11,"mat-select",6),h.fc("selectionChange",function(t){return e.changeLang(t.value)}),h.Qc(12,Z,3,4,"mat-option",7),h.Xb(),h.Xb(),h.Xb(),h.Tb(13,"mat-divider"),h.Qc(14,tt,7,4,"ng-container",8),h.Yb(15,"mat-list"),h.Yb(16,"div",9),h.Sc(17),h.kc(18,"translate"),h.Xb(),h.Qc(19,et,5,5,"mat-list-item",10),h.Xb(),h.Tb(20,"mat-divider"),h.Yb(21,"p"),h.Sc(22),h.kc(23,"translate"),h.Xb(),h.Yb(24,"a",11),h.Sc(25," community.maarch.org "),h.Xb(),h.Sc(26),h.kc(27,"translate"),h.Yb(28,"a",12),h.Sc(29," www.maarch.com "),h.Xb(),h.Tb(30,"p",13),h.kc(31,"translate"),h.Xb()),2&t&&(h.Eb(2),h.Uc("",h.mc(3,10,"lang.welcomeApp",h.yc(23,nt,e.appVersion))," !"),h.Eb(4),h.rc("formGroup",e.stepFormGroup),h.Eb(3),h.Uc("",h.lc(10,13,"lang.chooseAppLanguage")," : "),h.Eb(3),h.rc("ngForOf",e.langs),h.Eb(2),h.rc("ngIf",e.customs.length>0),h.Eb(3),h.Uc("",h.lc(18,15,"lang.installDescription")," : "),h.Eb(2),h.rc("ngForOf",e.steps),h.Eb(3),h.Uc(" ",h.lc(23,17,"lang.externalInfoSite")," : "),h.Eb(4),h.Uc(" ",h.lc(27,19,"lang.or")," "),h.Eb(4),h.rc("innerHTML",h.lc(31,21,"lang.maarchLicenceInstall"),h.Ic))},directives:[H.a,B.A,B.q,B.j,R.c,R.g,K.a,B.p,B.h,B.x,I.m,W.a,I.n,x.a,x.f,F.a,O.o,x.c,x.b,O.k],pipes:[v.c],styles:[".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}.stepContent[_ngcontent-%COMP%]   .maarchLogoFull[_ngcontent-%COMP%]{width:300px;height:100px}.stepContent[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.link[_ngcontent-%COMP%]{text-decoration:underline;color:var(--maarch-color-primary)!important}"]}),rt),at=a("zkoq"),it=a("Qu3c"),st=["packageItem"];function ct(t,e){if(1&t&&(h.Yb(0,"mat-grid-tile"),h.Yb(1,"mat-list-item"),h.Tb(2,"mat-icon",12),h.Yb(3,"div",13),h.Sc(4),h.kc(5,"translate"),h.Tb(6,"i",14,15),h.kc(8,"translate"),h.Xb(),h.Xb(),h.Xb()),2&t){var r=e.$implicit;h.Eb(2),h.Hb("fa iconCheckPackage icon_",r.state,""),h.Eb(2),h.Uc(" ",h.lc(5,7,"lang.install_"+r.label)," "),h.Eb(2),h.rc("id",r.label)("matTooltip",h.lc(8,9,"lang.install_"+r.label+"_desc"))("matTooltipClass","ok"!==r.state?"tooltip-red":"")}}function lt(t,e){if(1&t&&(h.Yb(0,"mat-list",8),h.Yb(1,"div",9),h.Sc(2),h.kc(3,"translate"),h.Xb(),h.Yb(4,"mat-grid-list",10),h.Qc(5,ct,9,11,"mat-grid-tile",11),h.Xb(),h.Xb()),2&t){var r=e.$implicit,n=h.jc();h.Eb(2),h.Tc(h.lc(3,2,"lang."+r.key)),h.Eb(3),h.rc("ngForOf",n.packagesList[r.key])}}var ut,pt=((ut=function(){function t(r,n,o,a){e(this,t),this.translate=r,this.http=n,this.notify=o,this._formBuilder=a,this.prerequisites={},this.packagesList={general:[{label:"phpVersionValid",required:!0},{label:"writable",required:!0}],tools:[{label:"unoconv",required:!0},{label:"netcatOrNmap",required:!0},{label:"pgsql",required:!0},{label:"curl",required:!0},{label:"zip",required:!0},{label:"wkhtmlToPdf",required:!0},{label:"imagick",required:!0}],phpExtensions:[{label:"fileinfo",required:!0},{label:"pdoPgsql",required:!0},{label:"gd",required:!0},{label:"mbstring",required:!0},{label:"json",required:!0},{label:"gettext",required:!0},{label:"xml",required:!0}],phpConfiguration:[{label:"errorReporting",required:!0},{label:"displayErrors",required:!0}]},this.docMaarchUrl="https://docs.maarch.org/gitbook/html/MaarchCourrier/".concat(Q.a.VERSION.split(".")[0]+"."+Q.a.VERSION.split(".")[1],"/guat/guat_prerequisites/home.html")}return n(t,[{key:"ngOnInit",value:function(){this.stepFormGroup=this._formBuilder.group({firstCtrl:["",B.y.required]}),this.getStepData()}},{key:"getStepData",value:function(){var t=this;this.http.get("../rest/installer/prerequisites").pipe(Object(f.a)(function(e){t.prerequisites=e.prerequisites,Object.keys(t.packagesList).forEach(function(e){t.packagesList[e].forEach(function(r,n){t.packagesList[e][n].state=t.prerequisites[t.packagesList[e][n].label]?"ok":"ko","phpVersionValid"===t.packagesList[e][n].label&&t.translate.setTranslation(t.translate.getDefaultLang(),{lang:{install_phpVersionValid_desc:t.translate.instant("lang.currentVersion")+" : "+t.prerequisites.phpVersion}},!0)})}),t.stepFormGroup.controls.firstCtrl.setValue(t.checkStep()),t.stepFormGroup.controls.firstCtrl.markAsUntouched()}),Object(g.a)(function(e){return t.notify.handleSoftErrors(e),Object(d.a)(!1)})).subscribe()}},{key:"initStep",value:function(){var t=this;Object.keys(this.packagesList).forEach(function(e){t.packagesList[e].forEach(function(r,n){"ko"===t.packagesList[e][n].state&&t.packageItem.toArray().filter(function(r){return r._elementRef.nativeElement.id===t.packagesList[e][n].label})[0].toggle()})})}},{key:"checkStep",value:function(){var t=this,e="success";return Object.keys(this.packagesList).forEach(function(r){t.packagesList[r].forEach(function(t){"ko"===t.state&&(e="")})}),e}},{key:"isValidStep",value:function(){return void 0!==this.stepFormGroup&&"success"===this.stepFormGroup.controls.firstCtrl.value}},{key:"getFormGroup",value:function(){return this.stepFormGroup}},{key:"getInfoToInstall",value:function(){return[]}}]),t}()).\u0275fac=function(t){return new(t||ut)(h.Sb(v.d),h.Sb(y.b),h.Sb(k.a),h.Sb(B.e))},ut.\u0275cmp=h.Mb({type:ut,selectors:[["app-prerequisite"]],viewQuery:function(t,e){var r;1&t&&h.Zc(st,1),2&t&&h.Cc(r=h.gc())&&(e.packageItem=r)},decls:16,vars:14,consts:[[1,"stepContent"],[1,"stepContentTitle"],[1,"fas","fa-check-square"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","30px","min-width","100%"],["target","_blank",1,"link",3,"href"],["style","background: white;",4,"ngFor","ngForOf"],[2,"text-align","center"],["mat-raised-button","","type","button","color","primary",3,"click"],[2,"background","white"],["mat-subheader",""],["cols","3","rowHeight","50px"],[4,"ngFor","ngForOf"],["mat-list-icon",""],["mat-line","",1,"packageName"],["matTooltipPosition","right",1,"fa","fa-info-circle",3,"id","matTooltip","matTooltipClass"],["packageItem","matTooltip"]],template:function(t,e){1&t&&(h.Yb(0,"div",0),h.Yb(1,"h2",1),h.Tb(2,"i",2),h.Sc(3),h.kc(4,"translate"),h.Xb(),h.Yb(5,"div",3),h.Sc(6),h.kc(7,"translate"),h.Yb(8,"a",4),h.Sc(9),h.Xb(),h.Xb(),h.Qc(10,lt,6,4,"mat-list",5),h.kc(11,"keyvalue"),h.Yb(12,"div",6),h.Yb(13,"button",7),h.fc("click",function(){return e.getStepData()}),h.Sc(14),h.kc(15,"translate"),h.Xb(),h.Xb(),h.Xb()),2&t&&(h.Eb(3),h.Uc(" ",h.lc(4,6,"lang.prerequisite"),""),h.Eb(3),h.Uc(" ",h.lc(7,8,"lang.stepPrerequisite_desc")," : "),h.Eb(2),h.sc("href",e.docMaarchUrl,h.Kc),h.Eb(1),h.Tc(e.docMaarchUrl),h.Eb(1),h.rc("ngForOf",h.lc(11,10,e.packagesList)),h.Eb(4),h.Tc(h.lc(15,12,"lang.updateInformations")))},directives:[I.m,F.b,x.a,x.f,at.a,at.c,x.c,H.a,x.b,O.k,it.b],pipes:[v.c,I.g],styles:['@charset "UTF-8";.stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}.packageItem[_ngcontent-%COMP%]{flex:1!important}.iconCheckPackage[_ngcontent-%COMP%]{background:#fff;font-size:15px!important;display:flex;align-items:center;justify-content:center;padding:10px;border-radius:20px;height:35px;width:35px}.icon_ok[_ngcontent-%COMP%]{color:green}.icon_ok[_ngcontent-%COMP%]:before{content:"\uf111"}.icon_warning[_ngcontent-%COMP%]{color:orange}.icon_warning[_ngcontent-%COMP%]:before{content:"\uf111"}.icon_ko[_ngcontent-%COMP%]{color:red}.icon_ko[_ngcontent-%COMP%]:before{content:"\uf111"}.link[_ngcontent-%COMP%]{text-decoration:underline;color:var(--maarch-color-primary)!important}.packageName[_ngcontent-%COMP%]{font-size:120%!important;white-space:normal!important}.packageName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:help;opacity:.5;color:var(--maarch-color-primary)} .tooltip-red{background:#b71c1c;font-size:14px}']}),ut),bt=a("qFsG");function mt(t,e){1&t&&(h.Yb(0,"div",18),h.Sc(1),h.kc(2,"translate"),h.Xb()),2&t&&(h.Eb(1),h.Uc(" ",h.lc(2,1,"lang.stepEmptyDb")," "))}function dt(t,e){if(1&t&&(h.Yb(0,"mat-option",19),h.Sc(1),h.Xb()),2&t){var r=e.$implicit;h.rc("value",r),h.Eb(1),h.Uc(" ",r," ")}}var ft,gt,ht=((gt=function(){function t(r,n,o,a,i,s){e(this,t),this.translate=r,this.http=n,this._formBuilder=o,this.notify=a,this.functionsService=i,this.installerService=s,this.hide=!0,this.connectionState=!1,this.dbExist=!1,this.dataFiles=[],this.nextStep=new h.o;var c=[B.y.pattern(/^[^\;\" \\]+$/),B.y.required],l=[B.y.pattern(/^[^ ]+$/),B.y.required];this.stepFormGroup=this._formBuilder.group({dbHostCtrl:["localhost",B.y.required],dbLoginCtrl:["",l],dbPortCtrl:["5432",B.y.required],dbPasswordCtrl:["",l],dbNameCtrl:["",c],dbSampleCtrl:["data_fr",B.y.required],stateStep:["",B.y.required]})}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.stepFormGroup.controls.dbHostCtrl.valueChanges.pipe(Object(f.a)(function(){return t.stepFormGroup.controls.stateStep.setValue("")})).subscribe(),this.stepFormGroup.controls.dbLoginCtrl.valueChanges.pipe(Object(f.a)(function(){return t.stepFormGroup.controls.stateStep.setValue("")})).subscribe(),this.stepFormGroup.controls.dbPortCtrl.valueChanges.pipe(Object(f.a)(function(){return t.stepFormGroup.controls.stateStep.setValue("")})).subscribe(),this.stepFormGroup.controls.dbPasswordCtrl.valueChanges.pipe(Object(f.a)(function(){return t.stepFormGroup.controls.stateStep.setValue("")})).subscribe(),this.stepFormGroup.controls.dbNameCtrl.valueChanges.pipe(Object(f.a)(function(){return t.stepFormGroup.controls.stateStep.setValue("")})).subscribe(),this.getDataFiles()}},{key:"getDataFiles",value:function(){var t=this;this.http.get("../rest/installer/sqlDataFiles").pipe(Object(f.a)(function(e){t.dataFiles=e.dataFiles}),Object(g.a)(function(e){return t.notify.handleSoftErrors(e),Object(d.a)(!1)})).subscribe()}},{key:"isValidConnection",value:function(){return!1}},{key:"initStep",value:function(){this.installerService.isStepAlreadyLaunched("database")&&this.stepFormGroup.disable()}},{key:"checkConnection",value:function(){var t=this;this.http.get("../rest/installer/databaseConnection",{observe:"response",params:{server:this.stepFormGroup.controls.dbHostCtrl.value,port:this.stepFormGroup.controls.dbPortCtrl.value,user:this.stepFormGroup.controls.dbLoginCtrl.value,password:this.stepFormGroup.controls.dbPasswordCtrl.value,name:this.stepFormGroup.controls.dbNameCtrl.value}}).pipe(Object(f.a)(function(e){t.dbExist=200===e.status,t.notify.success(t.translate.instant("lang.rightInformations")),t.stepFormGroup.controls.stateStep.setValue("success"),t.nextStep.emit()}),Object(g.a)(function(e){return t.dbExist=!1,t.notify.error(t.translate.instant("Given database has tables"===e.error.errors?"lang.dbNotEmpty":"lang.badInformations")),t.stepFormGroup.markAllAsTouched(),t.stepFormGroup.controls.stateStep.setValue(""),Object(d.a)(!1)})).subscribe()}},{key:"checkStep",value:function(){return this.stepFormGroup.valid}},{key:"isValidStep",value:function(){return!!this.installerService.isStepAlreadyLaunched("database")||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}},{key:"isEmptyConnInfo",value:function(){return this.stepFormGroup.controls.dbHostCtrl.invalid||this.stepFormGroup.controls.dbPortCtrl.invalid||this.stepFormGroup.controls.dbLoginCtrl.invalid||this.stepFormGroup.controls.dbPasswordCtrl.invalid||this.stepFormGroup.controls.dbNameCtrl.invalid}},{key:"getFormGroup",value:function(){return!!this.installerService.isStepAlreadyLaunched("database")||this.stepFormGroup}},{key:"getInfoToInstall",value:function(){return[{idStep:"database",body:{server:this.stepFormGroup.controls.dbHostCtrl.value,port:this.stepFormGroup.controls.dbPortCtrl.value,user:this.stepFormGroup.controls.dbLoginCtrl.value,password:this.stepFormGroup.controls.dbPasswordCtrl.value,name:this.stepFormGroup.controls.dbNameCtrl.value,data:this.stepFormGroup.controls.dbSampleCtrl.value},route:{method:"POST",url:"../rest/installer/database"},description:this.translate.instant("lang.stepDatabaseActionDesc"),installPriority:2}]}}]),t}()).\u0275fac=function(t){return new(t||gt)(h.Sb(v.d),h.Sb(y.b),h.Sb(B.e),h.Sb(k.a),h.Sb(V.a),h.Sb(S))},gt.\u0275cmp=h.Mb({type:gt,selectors:[["app-database"]],outputs:{nextStep:"nextStep"},decls:47,vars:35,consts:[[1,"stepContent"],[1,"stepContentTitle"],[1,"fa","fa-database"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","30px","min-width","100%"],[2,"width","850px","margin","auto",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","dbHostCtrl","required",""],["matInput","","formControlName","dbPortCtrl","required",""],["matInput","","formControlName","dbLoginCtrl","required",""],["matInput","","formControlName","dbPasswordCtrl","required","",3,"type"],["mat-icon-button","","matSuffix","","color","primary",3,"click"],["matInput","","formControlName","dbNameCtrl","maxlength","50","required",""],["class","alert-message alert-message-info","role","alert","style","margin-top: 0px;min-width: 100%;",4,"ngIf"],["appearance","outline","floatLabel","never"],["formControlName","dbSampleCtrl"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","0px","min-width","100%"],[3,"value"]],template:function(t,e){1&t&&(h.Yb(0,"div",0),h.Yb(1,"h2",1),h.Tb(2,"i",2),h.Sc(3),h.kc(4,"translate"),h.Xb(),h.Yb(5,"div",3),h.Sc(6),h.kc(7,"translate"),h.Xb(),h.Yb(8,"form",4),h.Yb(9,"mat-form-field",5),h.Yb(10,"mat-label"),h.Sc(11),h.kc(12,"translate"),h.Xb(),h.Tb(13,"input",6),h.Xb(),h.Yb(14,"mat-form-field",5),h.Yb(15,"mat-label"),h.Sc(16),h.kc(17,"translate"),h.Xb(),h.Tb(18,"input",7),h.Xb(),h.Yb(19,"mat-form-field",5),h.Yb(20,"mat-label"),h.Sc(21),h.kc(22,"translate"),h.Xb(),h.Tb(23,"input",8),h.Xb(),h.Yb(24,"mat-form-field",5),h.Yb(25,"mat-label"),h.Sc(26),h.kc(27,"translate"),h.Xb(),h.Tb(28,"input",9),h.Yb(29,"button",10),h.fc("click",function(){return e.hide=!e.hide}),h.Tb(30,"mat-icon"),h.Xb(),h.Xb(),h.Yb(31,"mat-form-field",5),h.Yb(32,"mat-label"),h.Sc(33),h.kc(34,"translate"),h.Xb(),h.Tb(35,"input",11),h.Xb(),h.Qc(36,mt,3,3,"div",12),h.Yb(37,"mat-form-field",13),h.Yb(38,"mat-label"),h.Sc(39),h.kc(40,"translate"),h.Xb(),h.Yb(41,"mat-select",14),h.Qc(42,dt,2,2,"mat-option",15),h.Xb(),h.Xb(),h.Yb(43,"div",16),h.Yb(44,"button",17),h.fc("click",function(){return e.checkConnection()}),h.Sc(45),h.kc(46,"translate"),h.Xb(),h.Xb(),h.Xb(),h.Xb()),2&t&&(h.Eb(3),h.Uc(" ",h.lc(4,17,"lang.database"),""),h.Eb(3),h.Uc(" ",h.lc(7,19,"lang.stepDatabase_desc")," "),h.Eb(2),h.rc("formGroup",e.stepFormGroup),h.Eb(3),h.Tc(h.lc(12,21,"lang.host")),h.Eb(5),h.Tc(h.lc(17,23,"lang.port")),h.Eb(5),h.Tc(h.lc(22,25,"lang.user")),h.Eb(5),h.Tc(h.lc(27,27,"lang.password")),h.Eb(2),h.rc("type",e.hide?"password":"text"),h.Eb(2),h.Hb("fa ",e.hide?"fa-eye-slash":"fa-eye",""),h.Eb(3),h.Tc(h.lc(34,29,"lang.dbName")),h.Eb(3),h.rc("ngIf",e.dbExist),h.Eb(3),h.Tc(h.lc(40,31,"lang.dbSample")),h.Eb(3),h.rc("ngForOf",e.dataFiles),h.Eb(2),h.rc("disabled",e.isEmptyConnInfo()||e.stepFormGroup.controls.dbHostCtrl.disabled),h.Eb(1),h.Uc(" ",h.lc(46,33,"lang.checkInformations")," "))},directives:[B.A,B.q,B.j,R.c,R.g,bt.b,B.c,B.p,B.h,B.x,F.b,R.i,H.a,B.l,I.n,K.a,I.m,O.o],pipes:[v.c],styles:[".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}"]}),gt),vt=((ft=function(){function t(r,n,o,a,i){var s=this;e(this,t),this.translate=r,this._formBuilder=n,this.notify=o,this.http=a,this.installerService=i,this.nextStep=new h.o;var c=[B.y.pattern(/^[^\'\<\>\|\*\:\?]+$/),B.y.required];this.stepFormGroup=this._formBuilder.group({docserversPath:["/opt/maarch/docservers/",c],stateStep:["",B.y.required]}),this.stepFormGroup.controls.docserversPath.valueChanges.pipe(Object(f.a)(function(){return s.stepFormGroup.controls.stateStep.setValue("")})).subscribe()}return n(t,[{key:"ngOnInit",value:function(){}},{key:"isValidStep",value:function(){return!!this.installerService.isStepAlreadyLaunched("docserver")||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}},{key:"initStep",value:function(){this.installerService.isStepAlreadyLaunched("docserver")&&this.stepFormGroup.disable()}},{key:"getFormGroup",value:function(){return!!this.installerService.isStepAlreadyLaunched("docserver")||this.stepFormGroup}},{key:"checkAvailability",value:function(){var t=this;this.http.get("../rest/installer/docservers",{params:{path:this.stepFormGroup.controls.docserversPath.value}}).pipe(Object(f.a)(function(e){t.notify.success(t.translate.instant("lang.rightInformations")),t.stepFormGroup.controls.stateStep.setValue("success"),t.nextStep.emit()}),Object(g.a)(function(e){return t.notify.error(t.translate.instant("lang.pathUnreacheable")),t.stepFormGroup.controls.stateStep.setValue(""),Object(d.a)(!1)})).subscribe()}},{key:"getInfoToInstall",value:function(){return[{idStep:"docserver",body:{path:this.stepFormGroup.controls.docserversPath.value},route:{method:"POST",url:"../rest/installer/docservers"},description:this.translate.instant("lang.stepDocserversActionDesc"),installPriority:3}]}}]),t}()).\u0275fac=function(t){return new(t||ft)(h.Sb(v.d),h.Sb(B.e),h.Sb(k.a),h.Sb(y.b),h.Sb(S))},ft.\u0275cmp=h.Mb({type:ft,selectors:[["app-docservers"]],outputs:{nextStep:"nextStep"},decls:20,vars:14,consts:[[1,"stepContent"],[1,"stepContentTitle"],[1,"fa","fa-hdd"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","30px","min-width","100%"],[2,"width","850px","margin","auto",3,"formGroup"],["appearance","outline",2,"color","initial"],["matInput","","formControlName","docserversPath"],["matSuffix",""],[2,"text-align","center"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(h.Yb(0,"div",0),h.Yb(1,"h2",1),h.Tb(2,"i",2),h.Sc(3),h.kc(4,"translate"),h.Xb(),h.Yb(5,"div",3),h.Sc(6),h.kc(7,"translate"),h.Xb(),h.Yb(8,"form",4),h.Yb(9,"mat-form-field",5),h.Yb(10,"mat-label"),h.Sc(11),h.kc(12,"translate"),h.Xb(),h.Tb(13,"input",6),h.Yb(14,"span",7),h.Sc(15,"/__CUSTOM_iD__/"),h.Xb(),h.Xb(),h.Yb(16,"div",8),h.Yb(17,"button",9),h.fc("click",function(){return e.checkAvailability()}),h.Sc(18),h.kc(19,"translate"),h.Xb(),h.Xb(),h.Xb(),h.Xb()),2&t&&(h.Eb(3),h.Uc(" ",h.lc(4,6,"lang.docserver"),""),h.Eb(3),h.Uc(" ",h.lc(7,8,"lang.stepDocserver_desc")," "),h.Eb(2),h.rc("formGroup",e.stepFormGroup),h.Eb(3),h.Tc(h.lc(12,10,"lang.docserverPath")),h.Eb(6),h.rc("disabled",!e.stepFormGroup.controls.docserversPath.valid),h.Eb(1),h.Tc(h.lc(19,12,"lang.checkInformations")))},directives:[B.A,B.q,B.j,R.c,R.g,bt.b,B.c,B.p,B.h,R.i,F.b],pipes:[v.c],styles:[".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}"]}),ft),yt=a("aEDk"),St=a("JX91"),kt=a("Kj3r"),Ct=a("jhN1"),Et=a("Wp6s");function Ft(t,e){1&t&&(h.Wb(0),h.Sc(1),h.kc(2,"translate"),h.Vb()),2&t&&(h.Eb(1),h.Uc(" ",h.lc(2,1,"lang.customAlreadyExist")," "))}function It(t,e){1&t&&(h.Wb(0),h.Sc(1),h.kc(2,"translate"),h.Vb()),2&t&&(h.Eb(1),h.Uc(" ",h.lc(2,1,"lang.invalidCustomName")," "))}var xt=function(){return{value1:'"_", "-"'}};function Ot(t,e){1&t&&(h.Wb(0),h.Sc(1),h.kc(2,"translate"),h.Vb()),2&t&&(h.Eb(1),h.Uc(" ",h.mc(2,1,"lang.onlySpecialCharAllowed",h.xc(4,xt))," "))}var wt=function(){return{value1:"2"}};function Gt(t,e){1&t&&(h.Wb(0),h.Sc(1),h.kc(2,"translate"),h.Vb()),2&t&&(h.Eb(1),h.Uc(" ",h.mc(2,1,"lang.invalidLengthCustomName",h.xc(4,wt))," "))}function Xt(t,e){if(1&t){var r=h.Zb();h.Yb(0,"mat-card",20),h.fc("click",function(){h.Hc(r);var t=e.$implicit;return h.jc().selectBg(t.url)}),h.Xb()}if(2&t){var n=e.$implicit,o=h.jc();h.Nc("background","url("+n.url+")"),h.Kb("selected",n.url===o.stepFormGroup.controls.bodyLoginBackground.value)("disabled",o.stepFormGroup.controls.bodyLoginBackground.disabled)}}function Yt(t,e){if(1&t){var r=h.Zb();h.Yb(0,"mat-card",21),h.fc("click",function(){return h.Hc(r),h.Dc(2).click()}),h.Yb(1,"input",22,23),h.fc("change",function(t){return h.Hc(r),h.jc().uploadTrigger(t,"bg")}),h.Xb(),h.Tb(3,"i",24),h.Xb()}}var Tt,_t,Lt=((_t=function(){function t(r,n,o,a,i,s,c){e(this,t),this.translate=r,this._formBuilder=n,this.notify=o,this.sanitizer=a,this.scanPipe=i,this.http=s,this.installerService=c,this.readonlyState=!1,this.backgroundList=[];var l=[B.y.pattern(/^[a-z0-9_\-]*$/),B.y.required,B.y.minLength(3)];this.stepFormGroup=this._formBuilder.group({firstCtrl:["success",B.y.required],customId:[null,l],appName:["Maarch Courrier "+Q.a.VERSION.split(".")[0]+"."+Q.a.VERSION.split(".")[1],B.y.required],loginMessage:['<span style="color:#5E952D"><strong>D\xe9couvrez votre application via</strong></span>&nbsp;<a title="le guide de visite" href="https://docs.maarch.org/gitbook/html/MaarchCourrier/'.concat(Q.a.VERSION.split(".")[0]+"."+Q.a.VERSION.split(".")[1],'/guu/home.html" target="_blank"><span style="color:#ED8022;"><strong>le guide de visite en ligne</strong></span></a>')],homeMessage:['<p>D&eacute;couvrez <strong>Maarch Courrier 21.03</strong> avec <a title="notre guide de visite" href="https://docs.maarch.org/" target="_blank"><span style="color:#ED8022;"><strong>notre guide de visite en ligne</strong></span></a>.</p>'],bodyLoginBackground:["assets/bodylogin.jpg"],uploadedLogo:["../rest/images?image=logo"]}),this.backgroundList=Array.from({length:17}).map(function(t,e){return{filename:"".concat(e+1,".jpg"),url:"assets/".concat(e+1,".jpg")}})}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.checkCustomExist(),this.stepFormGroup.controls.customId.valueChanges.pipe(Object(St.a)(""),Object(f.a)(function(){t.stepFormGroup.controls.firstCtrl.setValue("")}),Object(kt.a)(500),Object(q.a)(function(t){return t.length>2}),Object(q.a)(function(){return null===t.stepFormGroup.controls.customId.errors||void 0===t.stepFormGroup.controls.customId.errors.pattern}),Object(f.a)(function(){t.checkCustomExist()})).subscribe()}},{key:"initStep",value:function(){null===this.stepFormGroup.controls.customId.value&&this.stepFormGroup.controls.customId.setValue(this.appDatabase.getInfoToInstall()[0].body.name),this.installerService.isStepAlreadyLaunched("createCustom")&&this.installerService.isStepAlreadyLaunched("customization")?(this.stepFormGroup.disable(),this.readonlyState=!0,tinymce.remove(),this.initMce(!0)):this.installerService.isStepAlreadyLaunched("createCustom")?(this.stepFormGroup.controls.customId.disable(),this.stepFormGroup.controls.appName.disable(),this.stepFormGroup.controls.firstCtrl.disable()):this.installerService.isStepAlreadyLaunched("customization")?(this.stepFormGroup.controls.loginMessage.disable(),this.stepFormGroup.controls.homeMessage.disable(),this.stepFormGroup.controls.bodyLoginBackground.disable(),this.stepFormGroup.controls.uploadedLogo.disable(),this.readonlyState=!0,tinymce.remove(),this.initMce(!0)):(this.readonlyState=!1,this.initMce())}},{key:"checkCustomExist",value:function(){var t=this;this.http.get("../rest/installer/custom",{observe:"response",params:{customId:this.stepFormGroup.controls.customId.value}}).pipe(Object(f.a)(function(e){null!==t.stepFormGroup.controls.customId.errors?delete t.stepFormGroup.controls.customId.errors.customExist:t.stepFormGroup.controls.firstCtrl.setValue("success")}),Object(g.a)(function(e){return null!==e.error.errors.match(/^Custom already exists/g)?(t.stepFormGroup.controls.customId.setErrors(Object.assign(Object.assign({},t.stepFormGroup.controls.customId.errors),{customExist:!0})),t.stepFormGroup.controls.customId.markAsTouched()):null!==e.error.errors.match(/^Unauthorized custom name/g)?(t.stepFormGroup.controls.customId.setErrors(Object.assign(Object.assign({},t.stepFormGroup.controls.customId.errors),{invalidCustomName:!0})),t.stepFormGroup.controls.customId.markAsTouched()):t.notify.handleSoftErrors(e),Object(d.a)(!1)})).subscribe()}},{key:"isValidStep",value:function(){return!(!this.installerService.isStepAlreadyLaunched("createCustom")||!this.installerService.isStepAlreadyLaunched("customization"))||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}},{key:"getFormGroup",value:function(){return!(!this.installerService.isStepAlreadyLaunched("createCustom")||!this.installerService.isStepAlreadyLaunched("customization"))||this.stepFormGroup}},{key:"initMce",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];tinymce.init({selector:"textarea",base_url:"../node_modules/tinymce/",convert_urls:!1,height:"150",suffix:".min",language:this.translate.instant("lang.langISO").replace("-","_"),language_url:"../node_modules/tinymce-i18n/langs/".concat(this.translate.instant("lang.langISO").replace("-","_"),".js"),menubar:!1,statusbar:!1,readonly:t,plugins:["autolink"],external_plugins:{maarch_b64image:"../../src/frontend/plugins/tinymce/maarch_b64image/plugin.min.js"},toolbar_sticky:!0,toolbar_drawer:"floating",toolbar:t?"":"undo redo | fontselect fontsizeselect | bold italic underline strikethrough forecolor | maarch_b64image |         alignleft aligncenter alignright alignjustify         bullist numlist outdent indent | removeformat"})}},{key:"getInfoToInstall",value:function(){return[{idStep:"createCustom",body:{lang:this.appWelcome.stepFormGroup.controls.lang.value,customId:this.stepFormGroup.controls.customId.value,applicationName:this.stepFormGroup.controls.appName.value},description:this.translate.instant("lang.stepInstanceActionDesc"),route:{method:"POST",url:"../rest/installer/custom"},installPriority:1},{idStep:"customization",body:{loginMessage:tinymce.get("loginMessage").getContent(),homeMessage:tinymce.get("homeMessage").getContent(),bodyLoginBackground:this.stepFormGroup.controls.bodyLoginBackground.value,logo:this.stepFormGroup.controls.uploadedLogo.value},description:this.translate.instant("lang.stepCustomizationActionDesc"),route:{method:"POST",url:"../rest/installer/customization"},installPriority:3}]}},{key:"uploadTrigger",value:function(t,e){var r=this;if(t.target.files&&t.target.files[0]){var n=this.canUploadFile(t.target.files[0],e);if(!0===n){var o=new FileReader;o.readAsDataURL(t.target.files[0]),o.onload=function(t){if("logo"===e)r.stepFormGroup.controls.uploadedLogo.setValue(t.target.result);else{var n=new Image;n.onload=function(e){e.target.width<1920||e.target.height<1080?r.notify.error(r.translate.instant("lang.badImageResolution",{value1:"1920x1080"})):(r.backgroundList.push({filename:t.target.result,url:t.target.result}),r.stepFormGroup.controls.bodyLoginBackground.setValue(t.target.result))},n.src=t.target.result}}}else this.notify.error(n)}}},{key:"canUploadFile",value:function(t,e){var r="logo"!==e?["image/jpg","image/jpeg"]:["image/svg+xml"];if("logo"===e){if(t.size>5e6)return this.translate.instant("lang.maxFileSizeExceeded",{value1:"5mo"});if(-1===r.indexOf(t.type))return this.translate.instant("lang.onlyExtensionsAllowed",{value1:r.join(", ")})}else{if(t.size>1e7)return this.translate.instant("lang.maxFileSizeExceeded",{value1:"10mo"});if(-1===r.indexOf(t.type))return this.translate.instant("lang.onlyExtensionsAllowed",{value1:r.join(", ")})}return!0}},{key:"logoURL",value:function(){return this.sanitizer.bypassSecurityTrustUrl(this.stepFormGroup.controls.uploadedLogo.value)}},{key:"selectBg",value:function(t){this.stepFormGroup.controls.bodyLoginBackground.disabled||this.stepFormGroup.controls.bodyLoginBackground.setValue(t)}},{key:"clickLogoButton",value:function(t){this.stepFormGroup.controls.uploadedLogo.disabled||t.click()}}]),t}()).\u0275fac=function(t){return new(t||_t)(h.Sb(v.d),h.Sb(B.e),h.Sb(k.a),h.Sb(Ct.b),h.Sb(yt.e),h.Sb(y.b),h.Sb(S))},_t.\u0275cmp=h.Mb({type:_t,selectors:[["app-customization"]],inputs:{appDatabase:"appDatabase",appWelcome:"appWelcome"},features:[h.Db([yt.e])],decls:54,vars:36,consts:[[1,"stepContent"],[1,"stepContentTitle"],[1,"fas","fa-tools"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","30px","min-width","100%"],[2,"display","contents",3,"formGroup"],[1,"col-md-6"],["appearance","outline"],["matInput","","formControlName","customId"],[4,"ngIf"],["matInput","","formControlName","appName"],["name","loginMessage","id","loginMessage","formControlName","loginMessage",2,"padding-top","10px"],["name","homeMessage","id","homeMessage","formControlName","homeMessage",2,"padding-top","10px"],["matRipple","",2,"width","350px","background-size","100%","cursor","pointer"],[2,"width","100%",3,"src","click"],["type","file","name","files[]","accept","image/svg+xml",2,"display","none",3,"change"],["uploadLogo",""],[1,"backgroundList"],[1,"backgroundItem",2,"background","url(assets/bodylogin.jpg)","background-size","cover",3,"click"],["style","opacity: 0.3;","class","backgroundItem",3,"selected","disabled","background","click",4,"ngFor","ngForOf"],["style","opacity: 0.3;display: flex;align-items: center;justify-content: center;","class","backgroundItem",3,"click",4,"ngIf"],[1,"backgroundItem",2,"opacity","0.3",3,"click"],[1,"backgroundItem",2,"opacity","0.3","display","flex","align-items","center","justify-content","center",3,"click"],["type","file","name","files[]","accept","image/jpeg",2,"display","none",3,"change"],["uploadFile",""],[1,"fa","fa-plus",2,"font-size","30px","color","#666"]],template:function(t,e){if(1&t){var r=h.Zb();h.Yb(0,"div",0),h.Yb(1,"h2",1),h.Tb(2,"i",2),h.Sc(3),h.kc(4,"translate"),h.Xb(),h.Yb(5,"div",3),h.Sc(6),h.kc(7,"translate"),h.Xb(),h.Yb(8,"form",4),h.Yb(9,"div",5),h.Yb(10,"mat-form-field",6),h.Yb(11,"mat-label"),h.Sc(12),h.kc(13,"translate"),h.Xb(),h.Tb(14,"input",7),h.Yb(15,"mat-error"),h.Qc(16,Ft,3,3,"ng-container",8),h.Qc(17,It,3,3,"ng-container",8),h.Qc(18,Ot,3,5,"ng-container",8),h.Qc(19,Gt,3,5,"ng-container",8),h.Xb(),h.Xb(),h.Yb(20,"mat-form-field",6),h.Yb(21,"mat-label"),h.Sc(22),h.kc(23,"translate"),h.Xb(),h.Tb(24,"input",9),h.Xb(),h.Yb(25,"div"),h.Sc(26),h.kc(27,"translate"),h.Xb(),h.Tb(28,"textarea",10),h.Tb(29,"br"),h.Tb(30,"br"),h.Yb(31,"div"),h.Sc(32),h.kc(33,"translate"),h.Xb(),h.Tb(34,"textarea",11),h.Tb(35,"br"),h.Tb(36,"br"),h.Xb(),h.Yb(37,"div",5),h.Yb(38,"div"),h.Sc(39),h.kc(40,"translate"),h.Xb(),h.Yb(41,"div"),h.Yb(42,"mat-card",12),h.Yb(43,"img",13),h.fc("click",function(){h.Hc(r);var t=h.Dc(45);return e.clickLogoButton(t)}),h.Xb(),h.Yb(44,"input",14,15),h.fc("change",function(t){return e.uploadTrigger(t,"logo")}),h.Xb(),h.Xb(),h.Xb(),h.Tb(46,"br"),h.Yb(47,"div"),h.Sc(48),h.kc(49,"translate"),h.Xb(),h.Yb(50,"div",16),h.Yb(51,"mat-card",17),h.fc("click",function(){return e.selectBg("assets/bodylogin.jpg")}),h.Xb(),h.Qc(52,Xt,1,6,"mat-card",18),h.Qc(53,Yt,4,0,"mat-card",19),h.Xb(),h.Xb(),h.Xb(),h.Xb()}2&t&&(h.Eb(3),h.Uc(" ",h.lc(4,20,"lang.customization"),""),h.Eb(3),h.Uc(" ",h.lc(7,22,"lang.stepCustomization_desc")," "),h.Eb(2),h.rc("formGroup",e.stepFormGroup),h.Eb(4),h.Tc(h.lc(13,24,"lang.instanceId")),h.Eb(4),h.rc("ngIf",null==e.stepFormGroup.controls.customId.errors?null:e.stepFormGroup.controls.customId.errors.customExist),h.Eb(1),h.rc("ngIf",null==e.stepFormGroup.controls.customId.errors?null:e.stepFormGroup.controls.customId.errors.invalidCustomName),h.Eb(1),h.rc("ngIf",null==e.stepFormGroup.controls.customId.errors?null:e.stepFormGroup.controls.customId.errors.pattern),h.Eb(1),h.rc("ngIf",null==e.stepFormGroup.controls.customId.errors?null:e.stepFormGroup.controls.customId.errors.minlength),h.Eb(3),h.Tc(h.lc(23,26,"lang.applicationName")),h.Eb(4),h.Uc("",h.lc(27,28,"lang.loginMsg")," : "),h.Eb(6),h.Uc("",h.lc(33,30,"lang.homeMsg")," : "),h.Eb(7),h.Uc("",h.lc(40,32,"lang.chooseLogo")," : "),h.Eb(4),h.rc("src",e.logoURL(),h.Kc),h.Eb(5),h.Uc("",h.lc(49,34,"lang.chooseLoginBg")," : "),h.Eb(3),h.Kb("disabled",e.stepFormGroup.controls.bodyLoginBackground.disabled)("selected","assets/bodylogin.jpg"===e.stepFormGroup.controls.bodyLoginBackground.value),h.Eb(1),h.rc("ngForOf",e.backgroundList),h.Eb(1),h.rc("ngIf",!e.stepFormGroup.controls.bodyLoginBackground.disabled))},directives:[B.A,B.q,B.j,R.c,R.g,bt.b,B.c,B.p,B.h,R.b,I.n,Et.a,O.t,I.m],pipes:[v.c],styles:[".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}.backgroundList[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:10px}.selected[_ngcontent-%COMP%]{transition:all .3s;opacity:1!important;border:10px solid var(--maarch-color-secondary)!important}.backgroundItem[_ngcontent-%COMP%]{border:0 solid var(--maarch-color-secondary);opacity:.5;transition:all .3s;cursor:pointer;height:120px;background-size:cover!important}.disabled[_ngcontent-%COMP%]{cursor:default!important}.backgroundItem[_ngcontent-%COMP%]:not(.disabled):hover{transition:all .3s;opacity:1!important}"]}),_t),Pt=((Tt=function(){function t(r,n,o,a){e(this,t),this.translate=r,this._formBuilder=n,this.notify=o,this.installerService=a,this.hide=!0,this.tiggerInstall=new h.o;var i=[B.y.pattern(/^[\w.@-]*$/),B.y.required],s=[B.y.pattern(/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/),B.y.required];this.stepFormGroup=this._formBuilder.group({login:["superadmin",i],firstname:["Admin",B.y.required],lastname:["SUPER",B.y.required],password:["",B.y.required],passwordConfirm:["",B.y.required],email:["yourEmail@domain.com",s]})}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.stepFormGroup.controls.password.valueChanges.pipe(Object(f.a)(function(e){e!==t.stepFormGroup.controls.passwordConfirm.value?(t.stepFormGroup.controls.password.setErrors({incorrect:!0}),t.stepFormGroup.controls.passwordConfirm.setErrors({incorrect:!0}),t.stepFormGroup.controls.passwordConfirm.markAsTouched()):(t.stepFormGroup.controls.password.setErrors(null),t.stepFormGroup.controls.passwordConfirm.setErrors(null))})).subscribe(),this.stepFormGroup.controls.passwordConfirm.valueChanges.pipe(Object(f.a)(function(e){e!==t.stepFormGroup.controls.password.value?(t.stepFormGroup.controls.password.setErrors({incorrect:!0}),t.stepFormGroup.controls.password.markAsTouched(),t.stepFormGroup.controls.passwordConfirm.setErrors({incorrect:!0})):(t.stepFormGroup.controls.password.setErrors(null),t.stepFormGroup.controls.passwordConfirm.setErrors(null))})).subscribe()}},{key:"initStep",value:function(){this.installerService.isStepAlreadyLaunched("userAdmin")&&this.stepFormGroup.disable()}},{key:"isValidStep",value:function(){return void 0!==this.stepFormGroup&&(this.stepFormGroup.valid||this.installerService.isStepAlreadyLaunched("userAdmin"))}},{key:"getFormGroup",value:function(){return!!this.installerService.isStepAlreadyLaunched("userAdmin")||this.stepFormGroup}},{key:"getInfoToInstall",value:function(){return[{idStep:"userAdmin",body:{login:this.stepFormGroup.controls.login.value,firstname:this.stepFormGroup.controls.firstname.value,lastname:this.stepFormGroup.controls.lastname.value,password:this.stepFormGroup.controls.password.value,email:this.stepFormGroup.controls.email.value},route:{method:"PUT",url:"../rest/installer/administrator"},description:this.translate.instant("lang.stepUserAdminActionDesc"),installPriority:3}]}},{key:"launchInstall",value:function(){this.tiggerInstall.emit()}}]),t}()).\u0275fac=function(t){return new(t||Tt)(h.Sb(v.d),h.Sb(B.e),h.Sb(k.a),h.Sb(S))},Tt.\u0275cmp=h.Mb({type:Tt,selectors:[["app-useradmin"]],outputs:{tiggerInstall:"tiggerInstall"},decls:49,vars:39,consts:[[1,"stepContent"],[1,"stepContentTitle"],[1,"fas","fa-user"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","30px","min-width","100%"],[2,"width","850px","margin","auto",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","login"],["matInput","","formControlName","firstname"],["matInput","","formControlName","lastname"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","color","primary",3,"click"],["matInput","","formControlName","passwordConfirm",3,"type"],["matInput","","formControlName","email"]],template:function(t,e){1&t&&(h.Yb(0,"div",0),h.Yb(1,"h2",1),h.Tb(2,"i",2),h.Sc(3),h.kc(4,"translate"),h.Xb(),h.Yb(5,"div",3),h.Sc(6),h.kc(7,"translate"),h.Xb(),h.Yb(8,"form",4),h.Yb(9,"mat-form-field",5),h.Yb(10,"mat-label"),h.Sc(11),h.kc(12,"translate"),h.Xb(),h.Tb(13,"input",6),h.Xb(),h.Yb(14,"mat-form-field",5),h.Yb(15,"mat-label"),h.Sc(16),h.kc(17,"translate"),h.Xb(),h.Tb(18,"input",7),h.Xb(),h.Yb(19,"mat-form-field",5),h.Yb(20,"mat-label"),h.Sc(21),h.kc(22,"translate"),h.Xb(),h.Tb(23,"input",8),h.Xb(),h.Yb(24,"mat-form-field",5),h.Yb(25,"mat-label"),h.Sc(26),h.kc(27,"translate"),h.Xb(),h.Tb(28,"input",9),h.Yb(29,"button",10),h.fc("click",function(){return e.hide=!e.hide}),h.Tb(30,"mat-icon"),h.Xb(),h.Yb(31,"mat-error"),h.Sc(32),h.kc(33,"translate"),h.Xb(),h.Xb(),h.Yb(34,"mat-form-field",5),h.Yb(35,"mat-label"),h.Sc(36),h.kc(37,"translate"),h.Xb(),h.Tb(38,"input",11),h.Yb(39,"button",10),h.fc("click",function(){return e.hide=!e.hide}),h.Tb(40,"mat-icon"),h.Xb(),h.Yb(41,"mat-error"),h.Sc(42),h.kc(43,"translate"),h.Xb(),h.Xb(),h.Yb(44,"mat-form-field",5),h.Yb(45,"mat-label"),h.Sc(46),h.kc(47,"translate"),h.Xb(),h.Tb(48,"input",12),h.Xb(),h.Xb(),h.Xb()),2&t&&(h.Eb(3),h.Uc(" ",h.lc(4,19,"lang.userAdmin"),""),h.Eb(3),h.Uc(" ",h.lc(7,21,"lang.stepUserAdmin_desc")," "),h.Eb(2),h.rc("formGroup",e.stepFormGroup),h.Eb(3),h.Tc(h.lc(12,23,"lang.id")),h.Eb(5),h.Tc(h.lc(17,25,"lang.firstname")),h.Eb(5),h.Tc(h.lc(22,27,"lang.lastname")),h.Eb(5),h.Tc(h.lc(27,29,"lang.password")),h.Eb(2),h.rc("type",e.hide?"password":"text"),h.Eb(2),h.Hb("fa ",e.hide?"fa-eye-slash":"fa-eye",""),h.Eb(2),h.Tc(h.lc(33,31,"lang.passwordNotMatch")),h.Eb(4),h.Tc(h.lc(37,33,"lang.retypeNewPassword")),h.Eb(2),h.rc("type",e.hide?"password":"text"),h.Eb(2),h.Hb("fa ",e.hide?"fa-eye-slash":"fa-eye",""),h.Eb(2),h.Tc(h.lc(43,35,"lang.passwordNotMatch")),h.Eb(4),h.Tc(h.lc(47,37,"lang.email")))},directives:[B.A,B.q,B.j,R.c,R.g,bt.b,B.c,B.p,B.h,F.b,R.i,H.a,R.b],pipes:[v.c],styles:[".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}"]}),Tt),jt=["stepper"],Mt=["stepContent"];function qt(t,e){1&t&&h.Sc(0,"Installation")}function At(t,e){if(1&t){var r=h.Zb();h.Yb(0,"button",33),h.fc("click",function(){return h.Hc(r),h.jc(2).gotToLogin()}),h.kc(1,"translate"),h.Tb(2,"mat-icon",34),h.Xb()}2&t&&h.rc("title",h.lc(1,1,"lang.home"))}function Nt(t,e){1&t&&(h.Sc(0),h.kc(1,"translate")),2&t&&h.Tc(h.lc(1,1,"lang.prerequisite"))}function Vt(t,e){1&t&&(h.Sc(0),h.kc(1,"translate")),2&t&&h.Tc(h.lc(1,1,"lang.database"))}function Ut(t,e){1&t&&(h.Sc(0),h.kc(1,"translate")),2&t&&h.Tc(h.lc(1,1,"lang.docserver"))}function zt(t,e){1&t&&(h.Sc(0),h.kc(1,"translate")),2&t&&h.Tc(h.lc(1,1,"lang.customization"))}function Dt(t,e){1&t&&(h.Sc(0),h.kc(1,"translate")),2&t&&h.Tc(h.lc(1,1,"lang.userAdmin"))}function Bt(t,e){1&t&&h.Tb(0,"mat-icon",35)}function Qt(t,e){1&t&&h.Tb(0,"mat-icon",35)}function Ht(t,e){1&t&&h.Tb(0,"mat-icon",36)}function Rt(t,e){if(1&t){var r=h.Zb();h.Yb(0,"mat-horizontal-stepper",6,7),h.fc("selectionChange",function(t){return h.Hc(r),h.jc().initStep(t)}),h.Yb(2,"mat-step",8),h.Qc(3,qt,1,0,"ng-template",9),h.Yb(4,"div",10),h.Yb(5,"div",11),h.Tb(6,"app-welcome",null,12),h.Xb(),h.Qc(9,At,3,3,"button",13),h.Yb(10,"button",14),h.kc(11,"translate"),h.Tb(12,"mat-icon",15),h.Xb(),h.Xb(),h.Xb(),h.Yb(13,"mat-step",16),h.Qc(14,Nt,2,3,"ng-template",9),h.Yb(15,"div",10),h.Yb(16,"div",11),h.Tb(17,"app-prerequisite",null,17),h.Xb(),h.Yb(20,"button",18),h.kc(21,"translate"),h.Tb(22,"mat-icon",19),h.Xb(),h.Yb(23,"button",20),h.kc(24,"translate"),h.Tb(25,"mat-icon",15),h.Xb(),h.Xb(),h.Xb(),h.Yb(26,"mat-step",16),h.Qc(27,Vt,2,3,"ng-template",9),h.Yb(28,"div",10),h.Yb(29,"div",11),h.Yb(30,"app-database",21,22),h.fc("nextStep",function(){return h.Hc(r),h.jc().nextStep()}),h.Xb(),h.Xb(),h.Yb(33,"button",18),h.kc(34,"translate"),h.Tb(35,"mat-icon",19),h.Xb(),h.Yb(36,"button",20),h.kc(37,"translate"),h.Tb(38,"mat-icon",15),h.Xb(),h.Xb(),h.Xb(),h.Yb(39,"mat-step",16),h.Qc(40,Ut,2,3,"ng-template",9),h.Yb(41,"div",10),h.Yb(42,"div",11),h.Yb(43,"app-docservers",21,23),h.fc("nextStep",function(){return h.Hc(r),h.jc().nextStep()}),h.Xb(),h.Xb(),h.Yb(46,"button",18),h.kc(47,"translate"),h.Tb(48,"mat-icon",19),h.Xb(),h.Yb(49,"button",20),h.kc(50,"translate"),h.Tb(51,"mat-icon",15),h.Xb(),h.Xb(),h.Xb(),h.Yb(52,"mat-step",16),h.Qc(53,zt,2,3,"ng-template",9),h.Yb(54,"div",10),h.Yb(55,"div",11),h.Tb(56,"app-customization",24,25),h.Xb(),h.Yb(59,"button",18),h.kc(60,"translate"),h.Tb(61,"mat-icon",19),h.Xb(),h.Yb(62,"button",20),h.kc(63,"translate"),h.Tb(64,"mat-icon",15),h.Xb(),h.Xb(),h.Xb(),h.Yb(65,"mat-step",16),h.Qc(66,Dt,2,3,"ng-template",9),h.Yb(67,"div",10),h.Yb(68,"div",11),h.Yb(69,"app-useradmin",26,27),h.fc("tiggerInstall",function(){return h.Hc(r),h.jc().endInstall()}),h.Xb(),h.Xb(),h.Yb(72,"button",18),h.kc(73,"translate"),h.Tb(74,"mat-icon",19),h.Xb(),h.Yb(75,"button",28),h.fc("click",function(){return h.Hc(r),h.jc().endInstall()}),h.kc(76,"translate"),h.Tb(77,"mat-icon",29),h.Xb(),h.Xb(),h.Xb(),h.Qc(78,Bt,1,0,"ng-template",30),h.Qc(79,Qt,1,0,"ng-template",31),h.Qc(80,Ht,1,0,"ng-template",32),h.Xb()}if(2&t){var n=h.Dc(8),o=h.Dc(18),a=h.Dc(31),i=h.Dc(44),s=h.Dc(57),c=h.Dc(70),l=h.jc();h.rc("@.disabled",!0),h.Eb(9),h.rc("ngIf",!l.authService.noInstall),h.Eb(1),h.rc("title",h.lc(11,25,"lang.next")),h.Eb(3),h.rc("stepControl",o.getFormGroup()),h.Eb(7),h.rc("title",h.lc(21,27,"lang.previous")),h.Eb(3),h.rc("title",h.lc(24,29,"lang.next"))("disabled",!o.isValidStep()),h.Eb(3),h.rc("stepControl",a.getFormGroup()),h.Eb(7),h.rc("title",h.lc(34,31,"lang.previous")),h.Eb(3),h.rc("title",h.lc(37,33,"lang.next"))("disabled",!a.isValidStep()),h.Eb(3),h.rc("stepControl",i.getFormGroup()),h.Eb(7),h.rc("title",h.lc(47,35,"lang.previous")),h.Eb(3),h.rc("title",h.lc(50,37,"lang.next"))("disabled",!i.isValidStep()),h.Eb(3),h.rc("stepControl",s.getFormGroup()),h.Eb(4),h.rc("appDatabase",a)("appWelcome",n),h.Eb(3),h.rc("title",h.lc(60,39,"lang.previous")),h.Eb(3),h.rc("title",h.lc(63,41,"lang.next"))("disabled",!s.isValidStep()),h.Eb(3),h.rc("stepControl",c.getFormGroup()),h.Eb(7),h.rc("title",h.lc(73,43,"lang.previous")),h.Eb(3),h.rc("title",h.lc(76,45,"lang.beginInstall"))("disabled",!c.isValidStep())}}var $t,Kt,Wt,Zt=[{path:"",component:($t=function(){function t(r,n,o,a,i,s,c,l,u,p){e(this,t),this.translate=r,this.router=n,this.headerService=o,this.notify=a,this.appService=i,this.sortPipe=s,this.dialog=c,this.functionService=l,this.privilegeService=u,this.authService=p,this.loading=!0}return n(t,[{key:"ngOnInit",value:function(){this.headerService.hideSideBar=!0,this.authService.isAuth()||this.authService.noInstall?null===this.authService.getToken()||this.privilegeService.hasCurrentUserPrivilege("create_custom")?this.loading=!1:(this.router.navigate(["/login"]),this.notify.error(this.translate.instant("lang.mustPrivilegeToInstall"))):(this.router.navigate(["/login"]),this.notify.error(this.translate.instant("lang.mustConnectToInstall")))}},{key:"ngAfterViewInit",value:function(){$(".mat-horizontal-stepper-header-container").insertBefore(".bg-head-content"),$(".mat-step-icon").css("background-color","white"),$(".mat-step-icon").css("color","#5E952D"),$(".mat-step-label").css("color","white")}},{key:"isValidStep",value:function(){return!1}},{key:"initStep",value:function(t){this.stepContent.toArray()[t.selectedIndex].initStep()}},{key:"nextStep",value:function(){this.stepper.next()}},{key:"gotToLogin",value:function(){this.router.navigate(["/login"])}},{key:"endInstall",value:function(){var t=this,e=[];this.stepContent.toArray().forEach(function(t){e=e.concat(t.getInfoToInstall())}),e=this.sortPipe.transform(e,"installPriority"),this.dialog.open(M,{panelClass:"maarch-modal",disableClose:!0,width:"500px",data:e}).afterClosed().pipe(Object(q.a)(function(e){return!t.functionService.empty(e)}),Object(f.a)(function(t){}),Object(g.a)(function(e){return t.notify.handleErrors(e),Object(d.a)(!1)})).subscribe()}}]),t}(),$t.\u0275fac=function(t){return new(t||$t)(h.Sb(v.d),h.Sb(l.c),h.Sb(A.a),h.Sb(k.a),h.Sb(N.a),h.Sb(p.a),h.Sb(m.b),h.Sb(V.a),h.Sb(U.a),h.Sb(C.a))},$t.\u0275cmp=h.Mb({type:$t,selectors:[["ng-component"]],viewQuery:function(t,e){var r;1&t&&(h.Zc(jt,1),h.Zc(Mt,1)),2&t&&(h.Cc(r=h.gc())&&(e.stepper=r.first),h.Cc(r=h.gc())&&(e.stepContent=r))},features:[h.Db([{provide:u.h,useValue:{showError:!0}},p.a])],decls:7,vars:5,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-content"],[1,"container"],[1,"container-content",2,"overflow","hidden"],["linear","","style","height: 100vh;overflow: auto;",3,"selectionChange",4,"ngIf"],["linear","",2,"height","100vh","overflow","auto",3,"selectionChange"],["stepper",""],["label","install"],["matStepLabel",""],[1,"stepContainer"],[1,"stepContent"],["stepContent","","appWelcome",""],["mat-fab","","class","previousStepButton","color","primary",3,"title","click",4,"ngIf"],["mat-fab","","matStepperNext","","color","primary",1,"nextStepButton",3,"title"],[1,"fa","fa-arrow-right"],[3,"stepControl"],["appPrerequisite","","stepContent",""],["mat-fab","","matStepperPrevious","","color","primary",1,"previousStepButton",3,"title"],[1,"fa","fa-arrow-left"],["mat-fab","","matStepperNext","","color","primary",1,"nextStepButton",3,"title","disabled"],[3,"nextStep"],["appDatabase","","stepContent",""],["appDocservers","","stepContent",""],[3,"appDatabase","appWelcome"],["appCustomization","","stepContent",""],[3,"tiggerInstall"],["appUseradmin","","stepContent",""],["mat-fab","","color","accent",1,"nextStepButton",3,"title","disabled","click"],[1,"fas","fa-check-double"],["matStepperIcon","edit"],["matStepperIcon","done"],["matStepperIcon","error"],["mat-fab","","color","primary",1,"previousStepButton",3,"title","click"],[1,"fas","fa-home"],[1,"fa","fa-check","stepIcon"],[1,"fa","fa-times","stepIcon",2,"color","red","font-size","15px !important"]],template:function(t,e){1&t&&(h.Yb(0,"mat-sidenav-container",0),h.Yb(1,"mat-sidenav-content"),h.Yb(2,"div",1),h.Tb(3,"div",2),h.Xb(),h.Yb(4,"div",3),h.Yb(5,"div",4),h.Qc(6,Rt,81,47,"mat-horizontal-stepper",5),h.Xb(),h.Xb(),h.Xb(),h.Xb()),2&t&&(h.Eb(3),h.Kb("fullContainer",e.appService.getViewMode()),h.Eb(1),h.Kb("fullContainer",e.appService.getViewMode()),h.Eb(2),h.rc("ngIf",!e.loading))},directives:[z.b,z.c,I.n,D.a,D.b,D.c,ot,F.b,D.f,H.a,pt,D.g,ht,vt,Lt,Pt,D.d],pipes:[v.c],styles:[".mat-stepper-horizontal{height:100%!important}.container[_ngcontent-%COMP%]{padding-left:80px!important;padding-right:80px!important}.previousStepButton[_ngcontent-%COMP%]{position:fixed;top:50%;left:10px;transform:translateY(-50%)}.previousStepButton[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:25px;height:auto;width:auto}.nextStepButton[_ngcontent-%COMP%]{position:fixed;top:50%;right:13px;transform:translateY(-50%)}.nextStepButton[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:25px;height:auto;width:auto} .mat-step-icon{background-color:#fff;color:var(--maarch-color-primary)} .mat-step-label-active{opacity:1!important} .mat-step-label{color:#fff;opacity:.5}.stepIcon[_ngcontent-%COMP%]{font-size:10px!important;height:auto!important;width:auto!important} .mat-step-label{transition:all .2s} .mat-step-label-selected{font-size:160%;transition:all .2s;opacity:1}"]}),$t)}],Jt=((Wt=n(function t(){e(this,t)})).\u0275fac=function(t){return new(t||Wt)},Wt.\u0275mod=h.Qb({type:Wt}),Wt.\u0275inj=h.Pb({imports:[[l.f.forChild(Zt)],l.f]}),Wt),te=((Kt=n(function t(r){e(this,t),r.setDefaultLang("fr")})).\u0275fac=function(t){return new(t||Kt)(h.cc(v.d))},Kt.\u0275mod=h.Qb({type:Kt}),Kt.\u0275inj=h.Pb({providers:[S],imports:[[s.a,c.a,Jt]]}),Kt)}}])}();